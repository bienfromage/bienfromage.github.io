<!DOCTYPE html>
<head>
  <title>Stats Calculator for Physics</title>
  <meta charset="utf-8">
  <style>
    body{
      margin: 10px;
    }
    input{
      margin: 5px;
    }
  </style>
</head>
<body>
  <script>
    let state = 0;
    let size = 0;

    function calculate(){
      if(state == 2){
        let mean = getMean();
        let ad = getAvgDeviation(mean);
        let AD = getAvgDeviationMean(ad);
        let s = getStandardDeviation(mean);
        let Sx = getStandardError(s);
        
        document.getElementById("answers").innerHTML="<p id='answer'>mean: "+mean+" </p><p>Average Deviation (a.d.): "+ad+"</p><p>Average Deviation from the Mean (A.D.): "+AD+"</p><p>Standard Deviation (s): "+s+"</p><p>Standard Error (Sx): "+Sx+"</p>";
      }else if(state == 1){
        let mean = getMean();
        let ad = getAvgDeviation(mean);
        let AD = getAvgDeviationMean(ad);
        let s = getStandardDeviation(mean);
        let Sx = getStandardError(s);
        
        document.getElementById("answers").innerHTML+="<p id='answer'>mean: "+mean+" </p><p>Average Deviation (a.d.): "+ad+"</p><p>Average Deviation from the Mean (A.D.): "+AD+"</p><p>Standard Deviation (s): "+s+"</p><p>Standard Error (Sx): "+Sx+"</p>";
        document.getElementById("submit-button").value="Recalculate";
        state++;
      }else{
        size = Number(document.getElementById("valueSize").value);
        let form = document.getElementById("main-form");
        form.innerHTML="";
        
        for(i=0;i<size;i++){
          form.innerHTML+="Value "+(i+1)+": <input type='number' id='num"+i+"' step='any'><br>";
        }
        
        form.innerHTML+="<input type='submit' value='Calculate!' id='submit-button'>";
        
        state++;
      }
      
      return false;
    }
    
    function getMean(){
      let total = 0;
      for(i=0;i<size;i++){
        total+=Number(document.getElementById("num"+i).value);
      }
      return total/size;
    }
    
    function getDeviation(index,mean){
      return Math.abs(Number(document.getElementById("num"+index).value)-mean);
    }
    
    function getAvgDeviation(mean){
      let total = 0;
      for(i=0;i<size;i++){
        total+=getDeviation(i,mean);
      }
      return total/size;
    }
    
    function getAvgDeviationMean(ad){
      return ad/Math.sqrt(size);
    }
    
    function getStandardDeviation(mean){
      let total = 0;
      for(i=0;i<size;i++){
        total+=Math.pow(getDeviation(i,mean),2);
      }
      return Math.sqrt(total/(size-1));
    }
    
    function getStandardError(s){
      return s/Math.sqrt(size);
    }
  </script>
  
  <h1>Stats Calculator for Physics</h1>
  <form id="main-form" onsubmit="return calculate();">
    How many values?<br>
    <input type="number" id="valueSize">
    <br>
    <input type="submit" value="Submit">
  </form>
  <div id = "answers"></div>
</body>
</html>